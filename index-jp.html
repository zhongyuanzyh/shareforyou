<!DOCTYPE html>
<html lang="ja">
<head>
    <script data-ad-client="ca-pub-8081695460547937" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta charset="UTF-8">
    <meta name="description" content="shareforyou.onlineのホームページ、無料のyoutubeオーディオおよびビデオのダウンロード、サポートPC、iPhone、Android、タブレット">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ShareForYou YouTube
        ダウンローダー</title>
    <link rel="stylesheet" type="text/css" href="./css/web.css">
    <link rel="icon" href="./images/favicon.ico" type="image/x-icon">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">
        function convert() {
            // setTimeout(convert,1000);
            if ($("input[type=text]").val() ==="") {
                alert("ビデオ接続アドレスを入力してください。");
                return false;
            }
            //var reg1 = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
            var reg = /https:\/\/(www+\.)+(youtube+\.)+(\/[\w- .\/?%&=]*)?/;
            var objExp=new RegExp(reg);
            var res = objExp.test($("#input").val());
            if (res === false){
                console.log(res);
                alert("httpsで始まるyoutubeビデオアドレスを入力してください。");
                return false;
            }
            $.ajax({
                type: "POST",
                dataType: "json",
                beforeSend:function(){
                    $("#converter").hide();
                    $("#loading").show();
                    $(".loadingDiv").show();
                },
                url: "/mpx" ,//url
                data: $('#form1').serialize(),
                success: function (data) {
                    console.log(data);
                    if (data.error_code === 102 ){
                        $("#loading").hide();
                        $(".loadingDiv").hide();
                        $("#converter").hide();
                        $("#errorValue")[0].innerHTML = "ダウンロードした動画が30分を超えています。申し訳ありませんが、一時的にサポートしていません。";
                        $("#errorContent").show();
                    }else if (data.error_code === 103){
                        $("#loading").hide();
                        $(".loadingDiv").hide();
                        $("#converter").hide();
                        $("#downloadContent a")[0].innerHTML = data.video_info.title;
                        $("#downloadLink a").attr("href",data.download_url);
                        $("#downloadContent").show();
                    }else if (data.error_code === 101){
                        $("#loading").hide();
                        $(".loadingDiv").hide();
                        $("#converter").hide();
                        $("#errorValue")[0].innerHTML = "ビデオ情報の取得中にエラーが発生しました。ビデオリンクが正しいかどうかを確認してください。";
                        $("#errorContent").show();
                    }else if (data.error_code === 104){
                        $("#loading").hide();
                        $(".loadingDiv").hide();
                        $("#converter").hide();
                        $("#errorValue")[0].innerHTML = "現在、Youtube Webサイトからのビデオのみを処理できます。URLリンクを確認してください！";
                        $("#errorContent").show();
                    }
                },
                error : function(request) {
                    alert("異常な！");
                },
            });
        }
        function langChange(){
            var nSel = document.getElementById("languageBox");
            var index = nSel.selectedIndex;
            var text = nSel.options[index].text;
            var value= nSel.options[index].value;
            if (value === "opt1"){
                window.location.href = "index-jp.html";
            }else if (value === "opt2"){
                window.location.href = "index.html";
            }else if (value === "opt3"){
                window.location.href = "index-en.html";
            } else if (value === "opt4"){
                window.location.href = "index-th.html";
            }else if (value === "opt5"){
                window.location.href = "index-vn.html";
            }else if(value === "opt6"){
                window.location.href = "index-mm.html";
            }
        }
    </script>
    <script>
        function recommend() {
            $.ajax({
                type: "GET",
                url: "/recommend",
                success: function (data) {
                    console.log(data);
                    $("#dailyRecommend span")[0].innerHTML = data.song_name;
                    $("#mp3player").attr('src',data.song_path);
                },
            });
        }
    </script>
</head>
<body onload="recommend()">
    <div id="nav">
        <a href="https://www.yahoo.co.jp/" target="_blank">Yahoo</a>
        <a href="https://www.google.co.jp/" target="_blank">Google</a>
        <a href="https://www.youtube.com" target="_blank">Youtube</a>
        <a href="https://www.rakuten.co.jp/" target="_blank">楽天</a>
    </div>
    <div>
        <label for="languageBox"></label><select id="languageBox" onChange="langChange();">
            <option value="opt1">日本語</option>
            <option value="opt2">中文</option>
            <option value="opt3">English</option>
            <option value="opt4">ไทย</option>
            <option value="opt5">Tiếng Việt</option>
            <option value="opt6">ဗမာ</option>
        </select>
    </div>
    <div id="content">
        <a href="">
            <img id="logo" src="./images/mp3.png" alt="shareforyou logo">
        </a>
        <div id="converter_wrapper">
            <div id="converter">
                <div id="title">YouTubeビデオのリンクアドレスを入力してください</div>
            <form id="form1" onsubmit="return false" action="##" method="post">
                <label for="input"></label><input id="input" type="text" name="video" autocomplete="off" value="" autofocus>
                <input id="submit" type="button" value="変換を開始します" onclick="convert()">
                <div id="checkbox">
                    変換結果の形式を選択してください。
                    <label>
                        <input class="media" type="radio" name="format" value="mp3" checked>
                    </label>オーディオ
                    <label>
                        <input class="media" type="radio" name="format" value="mp4">
                    </label>ビデオ
                </div>
            </form>
            </div>
            <div id="downloadContent">
              <div id="downloadTitle">変換後にYouTubeビデオのURLをダウンロードする</div>
              <div id="downloadLink">
                <a href="" download></a> 
              </div>
            </div>
            <div id="progressContent">
                <div id="progressTitle">タスクのダウンロードの進行状況</div>
                <div id="progressValue"></div>
            </div>
            <div id="errorContent">
                <div id="errorTitle">Youtubeビデオダウンロードエラー</div>
                <div id="errorValue"></div>
            </div>
            <div id="loading">
                <div id="progressTitle">あなたのタスクは処理されています</div>
                <div class="loadingDiv"></div>
            </div>
        </div>
    <div id="separator"></div>
        <div id="dailyRecommend">
            <h1>毎日のおすすめ</h1>
            <p>おすすめの曲: <span id="recommendItem"></span></p>
            <audio id="mp3player" controls="controls" style="display: block" controlsList="noDownload">
                <source src="/i/song.ogg" type="audio/ogg" />
                <source src="/i/song.mp3" type="audio/mpeg" />
            </audio>
        </div>
        <div id="separator"></div>
    <div id="text">
        <h1>ShareForYou</h1>
        <p>コンバーターを使用すると、YouTubeビデオをmp3（オーディオ）またはmp4（ビデオ）ファイルに簡単に変換して無料でダウンロードできます。このサービスは、コンピューター、タブレット、モバイルデバイスに適しています。</p>
        <p>ビデオは常に利用可能な最高の品質で変換されます。 変換できる動画は最大30分までです。これには制限があるため、動画の変換に数分以上かかることはありません。</p>
        <p>広告をクリックできるように最善を尽くしてください。これを営業利益として使用します。 当社のサービスは無料で、ソフトウェアのインストールや登録は必要ありません。</p>
        <p>ビデオを変換するには、YouTubeビデオのURLをコンバーターにコピーし、フォーマットを選択して、変換ボタンをクリックしてください。 変換が完了したら、ダウンロードリンクをクリックしてファイルをダウンロードできます。</p>
        <p>楽しんでください！ あなたが私たちのサービスを気に入ってくれることを願っています。</p>
    </div>
    </div>
    <div id="footer">
        <a href="author-other.html" target="_blank">著者に連絡する</a>
    </div>
</body>
</html>
